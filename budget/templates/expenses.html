{% extends '__base_view__.html' %}
{% block title %}
  Wydatki
{% endblock %}
{% block body %}
  <div class="col col-sm-10">
    <div class="card card-body">
      <form method="post" class="form-inline">
        {% csrf_token %}
        <!-- <div class="form-group"> -->
          <label for="date" class="mr-sm-2">Data</label>
          <input type="date" id="date" name="date" class="form-control mb-2 mr-sm-2">
          <label for="amount" class="mr-sm-2">Kwota</label>
          <input type="number" step="0.01" id="amount" name="amount" class="form-control mb-2 mr-sm-2">
          {#        </div>#}
          {#        <div class="form-group col-md-3">#}
          <label for="category" class="mr-sm-2">Kategoria</label>
          <select id="category" name="category" class="form-control">
            {% for category in categories %}
              <option value="{{ category.id }}">{{ category.name }}</option>
            {% empty %}
              <option>Brak zdefiniowanych kategorii</option>
            {% endfor %}
          </select>
          {#        </div>#}
          <div class="form-group">
            <label for="comment" class="mr-sm-2">Komentarz</label>
            <textarea class="form-control mb-2 mr-sm-2" cols="40" rows="1" id="comment" name="comment"></textarea>
          </div>
          <button type="submit" class="btn btn-primary mb-2">Dodaj</button>
        <!-- </div> -->
      </form>
    </div>
    <div class="accordion" id="accordionExample">
      {% for partial_expenses, category in data %}
        <div class="card">
          <div class="card-header" id="heading{{ category.name }}">
            <h2 class="mb-0">
              <button class="btn btn-light container" type="button" data-toggle="collapse"
                      data-target="#collapse{{ category.name }}" aria-expanded="false"
                      aria-controls="collapse{{ category.name }}">
                <div class="row">
                  <div class="col-sm">{{ category.name }}</div>
                  <div class="col-sm">({{ partial_expenses }})</div>
                </div>
              </button>
            </h2>
          </div>
          <div id="collapse{{ category.name }}" class="collapse" aria-labelledby="heading{{ category.name }}" data-parent="#accordionExample">
            <div class="card-body">
              <table class="table table-hover">
                <thead class="thead-dark details">
                <tr>
                  <th>Data</th>
                  <th>Kwota</th>
                  <th>Opis</th>
                </tr>
                </thead>
                <tbody>
                {% for expense in expenses %}
                  {% if expense.category == category %}
                    <tr class="{{ category.name }}">
                      <td>{{ expense.date }}</td>
                      <td>{{ expense.amount }}</td>
                      <td>{{ expense.comment }}</td>
                    </tr>
                  {% endif %}
                {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>



    {#    <div class="accordion" id="accordionExample">#}
    {#      {% for partial_expenses, category in data %}#}
    {#        <table class="table table-hover card">#}
    {#          <thead class="card-header thead-dark details" id="heading{{ category.name }}">#}
    {#          <tr class="mb-0">#}
    {#            <th width="50%">{{ category.name }}</th>#}
    {#            <th width="25%">{{ partial_expenses }}</th>#}
    {#            <th width="25%">#}
    {#              <button class="btn btn-link" type="button" data-toggle="collapse"#}
    {#                      data-target="#collapse{{ category.name }}" aria-expanded="false"#}
    {#                      aria-controls="collapse{{ category.name }}">#}
    {#                Szczegóły#}
    {#              </button>#}
    {#            </th>#}
    {#          </tr>#}
    {#          </thead>#}
    {#          <tbody id="collapse{{ category.name }}" class="collapse" aria-labelledby="heading{{ category.name }}"#}
    {#                 data-parent="#accordionExample">#}
    {#          {% for expense in expenses %}#}
    {#            {% if expense.category == category %}#}
    {#              <tr class="{{ category.name }}">#}
    {#                <td width="25%">{{ expense.date }}</td>#}
    {#                <td width="25%">{{ expense.amount }}</td>#}
    {#                <td width="50%">{{ expense.comment }}</td>#}
    {#              </tr>#}
    {#            {% endif %}#}
    {#          {% endfor %}#}
    {#          </tbody>#}
    {#        </table>#}
    {#      {% endfor %}#}
    {#    </div>#}



  </div>
{% endblock %}